<table name="schools" phpName="School">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="original_id" type="varchar" size="50" required="true" />
	<column name="name" type="varchar" size="80" />
	<column name="school_unit" type="varchar" size="80" />
	<column name="address" type="varchar" size="255" />
	<column name="zip_code" type="varchar" size="5" />
	<column name="city" type="varchar" size="255" />
	<column name="phone_schulleitung" type="varchar" size="14" />
	<column name="phone_lehrerzimmer" type="varchar" size="14" />
	<column name="current_year" type="smallint" />
</table>

<table name="school_buildings" phpName="SchoolBuilding">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="original_id" type="integer" required="true" />
	<column name="name" type="varchar" size="255" />
</table>

<table name="team_member_functions" phpName="TeamMemberFunction">
	<column name="team_member_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="team_members" onDelete="cascade">
		<reference local="team_member_id" foreign="id" />
	</foreign-key>
	<column name="school_function_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="school_functions" onDelete="cascade">
		<reference local="school_function_id" foreign="id" />
	</foreign-key>	
	<column name="is_main_function" type="boolean" size="1" default="0" />
	<column name="is_newly_updated" type="boolean" size="1" default="0" />
</table>

<table name="school_functions" phpName="SchoolFunction">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="original_id" type="integer" required="true" />
	<column name="title" type="varchar" size="255" />
	<column name="function_group_id" type="integer" />
	<foreign-key foreignTable="function_groups" onDelete="setnull">
		<reference local="function_group_id" foreign="id" />
	</foreign-key>	
	<column name="school_id" type="integer" />
	<foreign-key foreignTable="schools" onDelete="cascade">
		<reference local="school_id" foreign="id" />
	</foreign-key>	
</table>

<table name="function_groups" phpName="FunctionGroup">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="original_name" type="varchar" required="true" size="100" />
	<column name="name_normalized" type="varchar" required="true" size="100" />
	<column name="name" type="varchar" size="100" />
</table>

<table name="school_classes" phpName="SchoolClass">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="original_id" type="integer" />
	<column name="name" type="varchar" size="80" />
	<column name="unit_name" type="varchar" size="80" />
	<column name="slug" type="varchar" size="80" />
	<column name="year" type="smallint" required="true" />
	<column name="level" description="Jahrgang" type="tinyint" />
	<column name="room_number" type="varchar" size="5" />
	<column name="teaching_unit" type="varchar" size="80" />
	<column name="class_portrait_id" type="integer" />
	<foreign-key foreignTable="documents" onDelete="setnull">
		<reference local="class_portrait_id" foreign="id" />
	</foreign-key>
	<column name="class_type_id" type="tinyint" />
	<foreign-key foreignTable="class_types" onDelete="setnull">
		<reference local="class_type_id" foreign="id" />
	</foreign-key>
	<column name="class_schedule_id" type="integer" />
	<foreign-key foreignTable="documents" onDelete="setnull">
		<reference local="class_schedule_id" foreign="id" />
	</foreign-key>
	<column name="week_schedule_id" type="integer" />
	<foreign-key foreignTable="documents" onDelete="setnull">
		<reference local="week_schedule_id" foreign="id" />
	</foreign-key>
	<column name="school_building_id" type="integer" />
	<foreign-key foreignTable="school_buildings" onDelete="setnull">
		<reference local="school_building_id" foreign="id" />
	</foreign-key>	
	<column name="school_id" type="integer" />
	<foreign-key foreignTable="schools" onDelete="cascade">
		<reference local="school_id" foreign="id" />
	</foreign-key>	
	<unique>
		<unique-column name="original_id" />
		<unique-column name="year" />
	</unique>
</table>

<table name="class_types" phpName="ClassType">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="original_name" type="varchar" required="true" size="100" />
	<column name="name_normalized" type="varchar" required="true" size="100" />
	<column name="name" type="varchar" size="100" />
</table>

<table name="team_members" phpName="TeamMember">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="original_id" type="integer" />
	<column name="last_name" type="varchar" size="40" />
	<column name="first_name" type="varchar" size="40" />
	<column name="slug" type="varchar" size="80" />
	<column name="gender_id" type="char" size="1" />
	<column name="employed_since" type="date" />
	<column name="date_of_birth" type="date" />
	<column name="profession" type="varchar" size="255" />
	<column name="email_g" type="varchar" size="255" />
	<column name="portrait_id" type="integer" />
	<foreign-key foreignTable="documents" onDelete="setnull">
		<reference local="portrait_id" foreign="id" />
	</foreign-key>
	<column name="user_id" type="integer" />
	<foreign-key foreignTable="users" onDelete="setnull">
		<reference local="user_id" foreign="id" />
	</foreign-key>
	<column name="is_deleted" type="boolean" size="1" default="0" />
	<column name="is_newly_updated" type="boolean" size="1" default="0" />
</table>

<table name="class_students" phpName="ClassStudent">
	<column name="school_class_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="school_classes" onDelete="cascade">
		<reference local="school_class_id" foreign="id" />
	</foreign-key>	
	<column name="function_name" type="varchar" size="80" />
	<column name="student_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="students" onDelete="cascade">
		<reference local="student_id" foreign="id" />
	</foreign-key>
</table>

<table name="class_links" phpName="ClassLink">
	<column name="school_class_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="school_classes" onDelete="cascade">
		<reference local="school_class_id" foreign="id" />
	</foreign-key>	
	<column name="link_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="links" onDelete="cascade">
		<reference local="link_id" foreign="id" />
	</foreign-key>
</table>

<table name="class_teachers" phpName="ClassTeacher">
	<column name="school_class_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="school_classes" onDelete="cascade">
		<reference local="school_class_id" foreign="id" />
	</foreign-key>	
	<column name="function_name" type="varchar" size="80" />
	<column name="sort_order" type="integer" />
	<column name="is_class_teacher" type="boolean" size="1" default="0" />
	<column name="team_member_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="team_members" onDelete="cascade">
		<reference local="team_member_id" foreign="id" />
	</foreign-key>
</table>

<table name="students" phpName="Student">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="original_id" type="integer" />
	<column name="last_name" type="varchar" size="40" />
	<column name="first_name" type="varchar" size="40" />
	<column name="date_of_birth" type="date" />
	<column name="portrait_id" type="integer" />
	<foreign-key foreignTable="documents" onDelete="setnull">
		<reference local="portrait_id" foreign="id" />
	</foreign-key>
</table>

<table name="events" phpName="Event">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="title" type="varchar" size="255" />
	<column name="title_normalized" type="varchar" size="255" />
	<column name="teaser" type="varchar" size="514" />
	<column name="body_preview" type="blob" />
	<column name="body_review" type="blob" />
	<column name="location_info" type="varchar" size="255" />
	<column name="date_start" type="date" required="true"/>
	<column name="date_end" type="date"/>
	<column name="time_details" type="varchar" size="255"/>
	<column name="is_active" type="boolean" size="1" default="0" />
	<column name="show_on_frontpage" type="boolean" size="1" default="0" />
	<column name="event_type_id" type="integer" />
	<foreign-key foreignTable="event_types" onDelete="cascade">
		<reference local="event_type_id" foreign="id" />
	</foreign-key>	
	<column name="service_id" type="integer" />
	<foreign-key foreignTable="services" onDelete="cascade">
		<reference local="service_id" foreign="id" />
	</foreign-key>	
	<column name="school_class_id" type="integer" />
	<foreign-key foreignTable="school_classes" onDelete="cascade">
		<reference local="school_class_id" foreign="id" />
	</foreign-key>	
	<column name="gallery_id" type="integer" />
	<foreign-key foreignTable="document_categories" onDelete="setnull">
		<reference local="gallery_id" foreign="id" />
	</foreign-key>
</table>

<table name="event_types" phpName="EventType">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="name" type="varchar" size="100" />
</table>

<table name="event_documents" phpName="EventDocument">
	<column name="event_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="events" onDelete="cascade">
		<reference local="event_id" foreign="id" />
	</foreign-key>	
	<column name="document_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="documents" onDelete="cascade">
		<reference local="document_id" foreign="id" />
	</foreign-key>
	<column name="sort" type="integer" />
</table>

<table name="services" phpName="Service">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="name" type="varchar" size="80" />
	<column name="slug" type="varchar" size="80" />
	<column name="teaser" type="varchar" size="255" />
	<column name="address" type="varchar" size="255" />
	<column name="opening_hours" type="varchar" size="255" />
	<column name="phone" type="varchar" size="20" />
	<column name="email" type="varchar" size="255" />
	<column name="website" type="varchar" size="255" />
	<column name="body" type="blob" />
	<column name="is_active" type="boolean" size="1" default="0" />
	<column name="logo_id" type="integer" />
	<foreign-key foreignTable="documents" onDelete="setnull">
		<reference local="logo_id" foreign="id" />
	</foreign-key>
	<column name="service_category_id" type="integer" />
	<foreign-key foreignTable="service_categories" onDelete="setnull">
		<reference local="service_category_id" foreign="id" />
	</foreign-key>
</table>

<table name="service_categories" phpName="ServiceCategory">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="name" type="varchar" size="100" />
	<column name="name_normalized" type="varchar" size="80" />
</table>

<table name="service_members" phpName="ServiceMember">
	<column name="service_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="services" onDelete="cascade">
		<reference local="service_id" foreign="id" />
	</foreign-key>	
	<column name="function_name" type="varchar" size="80" />
	<column name="team_member_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="team_members" onDelete="cascade">
		<reference local="team_member_id" foreign="id" />
	</foreign-key>
</table>

<table name="service_documents" phpName="ServiceDocument">
	<column name="service_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="services" onDelete="cascade">
		<reference local="service_id" foreign="id" />
	</foreign-key>	
	<column name="document_id" type="integer" required="true" primaryKey="true" />
	<foreign-key foreignTable="documents" onDelete="cascade">
		<reference local="document_id" foreign="id" />
	</foreign-key>
	<column name="sort" type="integer" />
</table>

<table name="***REMOVED***_syncronisations" phpName="***REMOVED***Syncronisation">
	<column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
	<column name="duration" type="integer"/>
	<column name="code" type="integer"/>
	<column name="log" type="blob" />
	<column name="is_executed_by_cron_job" type="boolean" required="true" default="1" />
</table>
